<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù‚Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ø´Ø¹Ø¨</title>
<style>
body { font-family:"Tahoma",sans-serif; background:linear-gradient(to bottom,#dff1ff,#f8fbff); margin:0; padding:0; color:#333; }
header { text-align:center; padding:40px 20px; background:linear-gradient(to bottom,#dff1ff,#f8fbff); border-radius:0 0 30px 30px; box-shadow:0 8px 20px rgba(0,0,0,.15),0 0 30px rgba(0,149,255,.1); }
header h1 { margin:0; font-size:32px; }
header p { margin-top:10px; font-size:18px; opacity:.9; line-height:1.5; }
.container { max-width:950px; margin:20px auto; padding:15px; }
.card { background:#fff; border-radius:18px; padding:25px; margin:20px 0; box-shadow:0 4px 12px rgba(0,0,0,.08); }
.card h2 { margin-bottom:15px; font-size:20px; color:#34495e; border-right:4px solid #3498db; padding-right:10px; }
input, select, button { padding:12px; margin:8px; border-radius:12px; border:1px solid #ddd; font-size:14px; }
input:focus, select:focus { border-color:#3498db; outline:none; box-shadow:0 0 5px rgba(52,152,219,.4); }
button { background:#3498db; color:#fff; border:none; cursor:pointer; transition:.3s; font-weight:bold; }
button:hover { background:#2980b9; }
.group-list { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; margin-top:15px; }
.group-card { background:#fefefe; border:1px solid #e1e1e1; border-radius:16px; padding:18px; text-align:right; transition:.3s; position:relative; }
.group-card:hover { transform:translateY(-5px); box-shadow:0 8px 18px rgba(0,0,0,.1); }
.group-card h3 { margin:0; font-size:17px; color:#2c3e50; }
.group-card p { margin:5px 0; font-size:14px; color:#555; }
.group-card a { display:inline-block; margin-top:10px; text-decoration:none; padding:8px 14px; border-radius:10px; font-size:14px; background:#2ecc71; color:white; transition:.3s; }
.group-card a:hover { background:#27ae60; }
.group-card button.edit-btn { margin-left:8px; padding:5px 10px; font-size:12px; border-radius:8px; cursor:pointer; border:none; background:#f39c12; color:#fff; }
.group-card button.edit-btn:hover { background:#e67e22; }
.empty { text-align:center; color:#888; font-style:italic; padding:15px; }
</style>
</head>
<body>

<header>
<h1>ğŸ“š Ø´Ø¹Ø¨ ÙƒÙ„ÙŠØ© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h1>
<p>ÙƒÙ„ Ø§Ù„Ø´Ø¹Ø¨ ÙˆØ§Ù„ØªØ®ØµØµØ§Øª ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯ âœ¨<br>Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø¹Ø¨ØªÙƒ Ø£Ùˆ Ø£Ø¶Ù/Ø¹Ø¯Ù„ Ù‚Ø±ÙˆØ¨Ùƒ Ø¨Ø³Ù‡ÙˆÙ„Ø© ğŸš€</p>
</header>

<div class="container">

<div class="card">
<h2>ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø©</h2>
<input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø¹Ø¨Ø©...">
<button onclick="searchGroups()">Ø¨Ø­Ø«</button>
<label for="filterCourse">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ Ù„Ù„ÙÙ„ØªØ±Ø©:</label>
<select id="filterCourse" onchange="displayGroups(true)">
<option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</option>
<option value="Ù†Ø¸Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¯Ø§Ø±ÙŠØ©">Ù†Ø¸Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¯Ø§Ø±ÙŠØ©</option>
<option value="Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</option>
<option value="Ø§Ù„ØªØ³ÙˆÙŠÙ‚">Ø§Ù„ØªØ³ÙˆÙŠÙ‚</option>
<option value="Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©">Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©</option>
<option value="Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±">Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</option>
<option value="Ø¹Ø§Ù…">Ø¹Ø§Ù…</option>
</select>
</div>

<div class="card">
<h2>â• Ø¥Ø¶Ø§ÙØ© Ù‚Ø±ÙˆØ¨ Ø¬Ø¯ÙŠØ¯</h2>
<form id="addForm" onsubmit="addGroup(event)">
<label for="course">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ:</label>
<select id="course" required>
<option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</option>
<option value="Ù†Ø¸Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¯Ø§Ø±ÙŠØ©">Ù†Ø¸Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¯Ø§Ø±ÙŠØ©</option>
<option value="Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</option>
<option value="Ø§Ù„ØªØ³ÙˆÙŠÙ‚">Ø§Ù„ØªØ³ÙˆÙŠÙ‚</option>
<option value="Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©">Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©</option>
<option value="Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±">Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</option>
<option value="Ø¹Ø§Ù…">Ø¹Ø§Ù…</option>
</select>
<input type="text" id="section" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø´Ø¹Ø¨Ø©" required>
<input type="text" id="subject" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù‚Ø±Ø±" required>
<input type="url" id="link" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ø±ÙˆØ¨" required>
<button type="submit">Ø¥Ø±Ø³Ø§Ù„ âœ…</button>
</form>
</div>

<div class="card">
<h2>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø±ÙˆØ¨Ø§Øª</h2>
<div class="group-list" id="groupsList">
<p class="empty">ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø¹Ø¨Ø© Ø£Ùˆ Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</p>
</div>
</div>

</div>

<script>
const APP_ID = "C7E35547-72C4-4099-A7F8-6FEA6A8CAAA9";
const REST_API_KEY = "239FFB7A-DE76-49AD-8D5F-9E54FB75CDC2";
const TABLE_NAME = "Groups";
const BASE_URL = `https://api.backendless.com/${APP_ID}/${REST_API_KEY}/data/${TABLE_NAME}`;

let groupsData = [];

async function fetchGroups() {
  try {
    const response = await fetch(BASE_URL);
    groupsData = await response.json();
    displayGroups(false);
  } catch (err) { console.error(err); }
}

async function addGroup(event, editId=null){
  event.preventDefault();
  const Major=document.getElementById("course").value.trim();
  const Section=document.getElementById("section").value.trim();
  const Course=document.getElementById("subject").value.trim();
  const Link=document.getElementById("link").value.trim();
  if(!Major||!Section||!Course||!Link){ alert("Ø§ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„"); return; }
  
  const duplicate = groupsData.find(g=>g.Section===Section && g.Link===Link && g.objectId!==editId);
  if(duplicate){ alert("Ø§Ù„Ù‚Ø±ÙˆØ¨ Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ø¨Ù†ÙØ³ Ø§Ù„Ø´Ø¹Ø¨Ø© ÙˆØ§Ù„Ø±Ø§Ø¨Ø·"); return; }

  const body={Major,Section,Course,Link};
  try{
    let result;
    if(editId){
      const res=await fetch(`${BASE_URL}/${editId}`,{method:"PUT", headers:{"Content-Type":"application/json"}, body:JSON.stringify(body)});
      result=await res.json();
      const idx=groupsData.findIndex(g=>g.objectId===editId);
      if(idx>=0) groupsData[idx]=result;
    } else {
      const res=await fetch(BASE_URL,{method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify(body)});
      result=await res.json();
      groupsData.push(result);
    }
    document.getElementById("addForm").reset();
    displayGroups(true);
  } catch(err){ console.error(err); alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©"); }
}

function editGroup(g){
  document.getElementById("course").value=g.Major;
  document.getElementById("section").value=g.Section;
  document.getElementById("subject").value=g.Course;
  document.getElementById("link").value=g.Link;
  document.getElementById("addForm").onsubmit=(e)=>addGroup(e,g.objectId);
  window.scrollTo(0,0);
}

function displayGroups(showAll=false){
  const container=document.getElementById("groupsList");
  const filter=document.getElementById("filterCourse").value;
  container.innerHTML="";
  let filtered=groupsData.filter(g=>g.Major==="Ø¹Ø§Ù…"||g.Major===filter);
  if(!showAll) filtered=[];
  filtered.forEach(g=>{
    container.innerHTML+=`
      <div class="group-card">
        <h3>${g.Major}</h3>
        <p>Ø§Ù„Ø´Ø¹Ø¨Ø©: ${g.Section}</p>
        <p>Ø§Ù„Ù…Ù‚Ø±Ø±: ${g.Course}</p>
        <a href="${g.Link}" target="_blank">Ø§Ù†Ø¶Ù…</a>
        <button class="edit-btn" onclick='editGroup(${JSON.stringify(g)})'>ØªØ¹Ø¯ÙŠÙ„</button>
      </div>
    `;
  });
  if(filtered.length===0) container.innerHTML="<p class='empty'>ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø¹Ø¨Ø© Ø£Ùˆ Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</p>";
}

function searchGroups(){
  const search=document.getElementById("searchInput").value.trim();
  const container=document.getElementById("groupsList");
  container.innerHTML="";
  const results=groupsData.filter(g=>g.Section.includes(search));
  results.forEach(g=>{
    container.innerHTML+=`
      <div class="group-card">
        <h3>${g.Major}</h3>
        <p>Ø§Ù„Ø´Ø¹Ø¨Ø©: ${g.Section}</p>
        <p>Ø§Ù„Ù…Ù‚Ø±Ø±: ${g.Course}</p>
        <a href="${g.Link}" target="_blank">Ø§Ù†Ø¶Ù…</a>
        <button class="edit-btn" onclick='editGroup(${JSON.stringify(g)})'>ØªØ¹Ø¯ÙŠÙ„</button>
      </div>
    `;
  });
  if(results.length===0) container.innerHTML="<p class='empty'>âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù‚Ø±ÙˆØ¨ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø¹Ø¨Ø©</p>";
}

fetchGroups();
</script>

</body>
</html>

